お題「最小文字数で百人一首」

あけましておめでとうございます。
お正月と言えば「かるた」。
「かるた」と言えば「百人一首」ですよね！

百人一首で有名な「競技かるた」はスポーツとしても取り組まれるように、スピード感が重要です。
特に「決まり字」を知っていることが勝負を分けるポイントになります。
「決まり字」によって、上の句の最初の数文字で札を取ることができます。

今回は、この上の句での「決まり字」を求めるだけでなく、下の句についても札に記載する文字数を最小限にすることを考えてください。

例えば、
「村雨の 露もまだひぬ まきの葉に
　霧たちのぼる 秋の夕ぐれ」
という句では、上の句は「む」の一文字で判別できます。
また、下の句は「き」の一文字で判別できます。

つまり、この一句では読み札は１文字、取り札は１文字の合計２文字で表現できることになります。
（読み札には「上の句」と「下の句」、取り札には「下の句」が書かれていますが、この一句の場合は最初の１文字だけでそれぞれ一意に識別できます。）
そこで、すべての句（１００句）を一意に識別するのに必要な最小の文字数を求めてください。

※百人一首のデータは下記のCSVファイルを使用することにします。
http://kujirahand.com/web-tools/hyakunin/hyakunin.csv
(このファイルのうち、「上の句かな」と「下の句かな」の列を使ってください。）

